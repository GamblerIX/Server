# 项目有重大Bug，作者也不知道哪里有Bug，但是就是有，先放着不管了，上学没精力搞


# 鸣潮服务端管理工具

一个用于管理鸣潮游戏服务端的Python项目，提供服务端启动、客户端补丁、环境检查等功能。
> 代码重构，呕心沥血，严禁用于商业任何活动，分享请注明出处。
> 项目现处于基本可用状态，如遇问题请在Issues中反馈。

## 快速开始

> 确保已经根据`docs/运行指南.md`完成环境配置。

```PowerShell
cd Server
pip install -r requirements.txt
python wuwa_server.py --run --all
```

## 📁 项目结构

```
Server/
       ├── docs/             # 详细使用指南
       │   └── 运行指南.md   # 完整的环境配置和使用说明
       ├── wuwa_server.py    # 主程序文件（4300+行完整实现）
       ├── requirements.txt  # Python依赖包
       └── README.md         # 项目说明文档
```

## 🚀 核心功能

### 服务端管理
- **一键启动**: 自动启动所有必需的服务端组件
- **状态监控**: 实时监控服务端运行状态和资源使用
- **进程管理**: 安全停止和重启服务端进程
- **版本管理**: 支持多版本服务端下载和切换

### 客户端支持
- **补丁应用**: 自动应用客户端补丁文件
- **版本适配**: 支持不同版本客户端的补丁管理
- **一键启动**: 集成客户端启动功能

### 环境检查
- **依赖检测**: 自动检查Python、PostgreSQL等依赖
- **配置验证**: 验证数据库连接和服务端配置
- **系统兼容**: 检查系统环境和资源状态

### 高级特性
- **并发处理**: 多线程服务端启动和管理
- **错误处理**: 完善的异常处理和错误恢复机制
- **日志系统**: 详细的操作日志和调试信息
- **网络测试**: 自动选择最佳下载源

## 📋 系统要求

- **操作系统**: Windows 10/11
- **Python**: 3.8 或更高版本
- **数据库**: PostgreSQL 17.x
- **内存**: 建议 4GB 以上
- **磁盘空间**: 服务端至少 2GB 可用空间（客户端至少 100GB 可用空间）

## 🔧 命令行参数

### 基础参数（必须且仅选一个）：

```
  --run         启动服务端
  --patch       应用补丁
  --status      查看状态
  --stop        停止服务端
  --check       环境检查
  --ddsr        下载服务端发行版
```

### 可叠加参数：

```
  --serveronly  仅服务端
  --clientonly  仅客户端
  --all         全部
  --version     指定版本 (格式: x.y)
```

### 🎯 使用示例

```PowerShell
# 启动服务端和客户端
python wuwa_server.py --run --all

# 仅启动服务端
python wuwa_server.py --run --serveronly

# 应用2.7版本客户端补丁
python wuwa_server.py --patch --version 2.7

# 下载2.7版本服务端
python wuwa_server.py --ddsr --version 2.7

# 检查环境状态
python wuwa_server.py --check --all

# 查看服务端状态
python wuwa_server.py --status --serveronly

# 停止服务端
python wuwa_server.py --stop
```

## 🔗 鸣谢

- [一键运行脚本](https://github.com/GamblerIX/Server)
- [服务端源码，客户端补丁源码](https://git.xeondev.com/wickedwaifus/)

## 🌐 服务端口配置

| 服务 | 端口 | 描述 |
|------|------|------|
| configserver | 10001 | 配置服务器 |
| loginserver | 5500 | 登录服务器 |
| gateway | 10003 | 网关服务器 |
| kcpport | 7777 | KCP传输端口 |
| gameserver | 10004 | 游戏服务器 |
| hotpatch | 10002 | 热更新服务器 |

## 🗄️ 数据库默认配置

```
host = "127.0.0.1:5432"
user_name = "users"
password = "password"
db_name = "users"
```

## ⚠️ 已知问题

> 客户端必须以管理员身份启动，脚本会自动申请权限。

> 自2.7版本起，必须先启动服务端再启动客户端，否则客户端会提示远程配置获取失败。

> 如遇到端口占用问题，请检查防火墙设置或使用其他端口。

---

## ⚖️ 免责声明

**重要法律声明：**

1. **仅供学习研究** - 本项目仅用于技术学习和研究目的，不得用于任何商业用途或盈利活动
2. **知识产权声明** - 鸣潮及相关内容版权归库洛游戏所有，项目不包含游戏原始资源或受版权保护内容，源码相关由wickedwaifus维护，仅用于学习研究目的。
3. **使用限制** - 禁止搭建公开服务器、商业运营、传播客户端文件或侵害版权的行为
4. **免责条款** - 开发者不对使用造成的任何损失或法律纠纷负责，使用者自担风险
5. **合规要求** - 请仅在本地环境进行技术研究，遵守法律法规与服务条款
6. **开源协议** - MIT 协议，附加条款为项目仅限学习研究目的使用与修改

**📝 README最后更新**: 2025年9月24日 | **📄 许可证**: MIT License
