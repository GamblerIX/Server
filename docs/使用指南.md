# å®Œæ•´ä½¿ç”¨æŒ‡å—

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨åœ¨Windowsä¸Šä¸€æ­¥æ­¥è¿è¡Œé¸£æ½®æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼Œä»¥æ¸¸ç©é¸£æ½®æµ‹è¯•æœã€‚

## ç¯å¢ƒé…ç½®

### ç¬¬ä¸€æ­¥ï¼šå®‰è£…Git

   * è®¿é—®é“¾æ¥ä¸‹è½½åå®‰è£…ï¼š<https://github.com/git-for-windows/git/releases/download/v2.50.1.windows.1/Git-2.50.1-64-bit.exe>

### ç¬¬äºŒæ­¥ï¼šå…‹éš†é¡¹ç›®

1. æ‰“å¼€ PowerShellï¼ˆç®¡ç†å‘˜ï¼‰

2. åˆ›å»ºæ–‡ä»¶å¤¹å¹¶å…‹éš†é¡¹ç›®
   ```PowerShell
   New-Item -Path "C:\{PATH}\" -ItemType Directory -Force
   cd "C:\{PATH}\"
   git clone https://github.com/GamblerIX/Server.git
   ```

3. è®¾ç½®æ–‡ä»¶å¤¹æƒé™
   ```PowerShell
   icacls "C:\{PATH}\" /grant Users:F /T
   ```

---

### ç¬¬ä¸‰æ­¥ï¼šå®‰è£…å’Œé…ç½® PostgreSQL æ•°æ®åº“

1) ä¸‹è½½å¹¶å®‰è£…ï¼š<https://get.enterprisedb.com/postgresql/postgresql-17.5-3-windows-x64.exe>

2) å®‰è£…æ—¶è®¾ç½® postgres ç”¨æˆ·å¯†ç ï¼š`Aa123456`

3) åˆ›å»ºæ•°æ®åº“ä¸ç”¨æˆ·ï¼ˆä»¥ PowerShell è¿è¡Œï¼‰ï¼š
   ```PowerShell
   Set-Location "C:\Program Files\PostgreSQL\17\bin"
   .\psql -U postgres -h 127.0.0.1 -p 5432
   ```

   æ¥ç€ä¾æ¬¡æ‰§è¡Œï¼š
   ```PowerShell
   CREATE DATABASE users;
   CREATE USER users WITH PASSWORD 'password';
   \c users
   GRANT CREATE, USAGE ON SCHEMA public TO users;
   GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO users;
   ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL PRIVILEGES ON TABLES TO users;
   \q
   ```

### ç¬¬å››æ­¥ï¼šå®‰è£… Python

1) ä¸‹è½½ï¼š<https://www.python.org/ftp/python/3.13.6/python-3.13.6-amd64.exe>

2) å®‰è£…æ—¶å‹¾é€‰ã€ŒAdd to PATHã€

### âœ… ç¯å¢ƒéªŒè¯

```PowerShell
python --version
git --version
```
PostgreSQL å¯é€šè¿‡å¼€å§‹èœå•çš„ pgAdmin 4 éªŒè¯ã€‚

## å®¢æˆ·ç«¯é…ç½®

### ä¸‹è½½å®¢æˆ·ç«¯

1. è®¿é—®é“¾æ¥ï¼š<https://www.123865.com/s/87lLTd-nUt3A?pwd=r1nx>
> å£°æ˜ï¼šå®¢æˆ·ç«¯ä½¿ç”¨123äº‘ç›˜åˆ†äº«æ²¡æœ‰ä»»ä½•ç‰Ÿåˆ©ç›®çš„ã€‚

2. å­˜åœ¨ä¸‰ç§æ¨èä¸‹è½½æ–¹æ³•ï¼š
   1. PCç™»å½•ç›´æ¥ä¸‹è½½ï¼ˆéœ€è¦ä¼šå‘˜ï¼‰
   2. æ‰‹æœºç™»å½•ä¸‹è½½ä¼ åˆ°PCç«¯ï¼ˆä¸é™é€Ÿä½†éº»çƒ¦ï¼‰
   3. PCç«¯æµè§ˆå™¨å®‰è£…ç¯¡æ”¹çŒ´æ’ä»¶ï¼Œç„¶åç›´æ¥è®¿é—®é“¾æ¥ï¼š<https://scriptcat.org/scripts/code/2385/123%20%E4%BA%91%E7%9B%98%E4%BC%9A%E5%91%98%E9%9D%92%E6%98%A5%E7%89%88.user.js>ï¼Œé€‰æ‹©å®‰è£…è„šæœ¬ï¼Œç„¶åç™»é™†ä¸‹è½½ã€‚ï¼ˆä¸é™é€Ÿä½†ç•¥å¾®éº»çƒ¦ï¼‰

3. è§£å‹ä¸‹è½½çš„å‹ç¼©åŒ…åˆ°`C:\{PATH}\Client`æ–‡ä»¶å¤¹ï¼Œç¡®ä¿`Wuthering Waves.exe`åœ¨`C:\{PATH}\Client`æ–‡ä»¶å¤¹å†…ã€‚

### è¡¥ä¸å®¢æˆ·ç«¯

```PowerShell
python wuwa_server.py --patchclient --version 2.6
```

> å°†2.6æ›¿æ¢ä¸ºå®é™…æ¸¸æˆç‰ˆæœ¬å·ã€‚

## è¿è¡ŒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯

```PowerShell
python wuwa_server.py --patchclient --version 2.6
```

è¿›å…¥æ¸¸æˆåä¸è¦ä½¿ç”¨å¿«é€Ÿæ–°å»º/ç™»å½•ï¼Œå¯ä½¿ç”¨ä»»æ„ ID è¿›å…¥ã€‚

## æ•°æ®åº“é…ç½®æ‘˜è¦

```
host = "127.0.0.1:5432"
user_name = "users"
password = "password"
db_name = "users"
```


## å‘½ä»¤è¡Œä½¿ç”¨æ–¹å¼

æ‰€æœ‰å‘½ä»¤éœ€åœ¨ `Server` ç›®å½•ä¸‹æ‰§è¡Œï¼š

```PowerShell
cd "C:\{PATH}\Server"
pip install -r requirements.txt
```

- å¯åŠ¨æœåŠ¡ç«¯ï¼ˆè‡ªåŠ¨é€‰æ‹©æœ€æ–° release ç‰ˆæœ¬ï¼Œæˆ–ä½¿ç”¨ --version æŒ‡å®šï¼‰
  ```PowerShell
  python wuwa_server.py --run [--version 2.6]
  ```
- åœæ­¢æ‰€æœ‰æœåŠ¡ç«¯
  ```PowerShell
  python wuwa_server.py --stop
  ```
- æ˜¾ç¤ºæœåŠ¡ç«¯çŠ¶æ€
  ```PowerShell
  python wuwa_server.py --status
  ```
- è°ƒè¯•è¿è¡Œï¼ˆåˆ†çª—å£å¯åŠ¨å„æœåŠ¡ç«¯ï¼‰
  ```PowerShell
  python wuwa_server.py --debug [--version 2.6]
  ```
- ç¯å¢ƒæ£€æŸ¥ï¼ˆæŒ‰æŒ‡å®šæˆ–æœ€æ–°ç‰ˆæœ¬ï¼‰
  ```PowerShell
  python wuwa_server.py --check [--version 2.6]
  ```
- ä»…æ£€æŸ¥æœåŠ¡ç«¯ç¯å¢ƒ
  ```PowerShell
  python wuwa_server.py --check --server-only [--version 2.6]
  ```
- ä»…æ£€æŸ¥å®¢æˆ·ç«¯ç¯å¢ƒ
  ```PowerShell
  python wuwa_server.py --check --client-only [--version 2.6]
  ```
- åº”ç”¨å®¢æˆ·ç«¯è¡¥ä¸
  ```PowerShell
  python wuwa_server.py --patchclient --version 2.6
  ```
- åŒæ—¶å¯åŠ¨æœåŠ¡ç«¯å’Œåº”ç”¨å®¢æˆ·ç«¯è¡¥ä¸
  ```PowerShell
  python wuwa_server.py --runserverandclient --version 2.6
  ```

## è§’è‰²æŠ€èƒ½å……èƒ½

å…¨æ–‡æ›¿æ¢ä¿®æ”¹ `Server/release/<ç‰ˆæœ¬>/data/assets/game-data/BinData/BaseProperty.json` çš„ä»¥ä¸‹å­—æ®µï¼š
```json
{
  "CdReduse": 0,
  "EnergyMax": 0,
  "Energy": 1
}
```
è¿™æ ·å°±èƒ½å®ç°æ— CDä¸æ»¡èƒ½é‡æ•ˆæœã€‚

## ğŸŒ æœåŠ¡ç«¯å£

| æœåŠ¡ | ç«¯å£ | æè¿° |
|------|------|------|
| configserver | 10001 | é…ç½®æœåŠ¡å™¨ |
| loginserver | 5500 | ç™»å½•æœåŠ¡å™¨ |
| gateway | 10003 | ç½‘å…³æœåŠ¡å™¨ |
| kcpport | 7777 | KCPä¼ è¾“ç«¯å£ |
| gameserver | 10004 | æ¸¸æˆæœåŠ¡å™¨ |
| hotpatch | 10002 | çƒ­æ›´æ–°æœåŠ¡å™¨ |
